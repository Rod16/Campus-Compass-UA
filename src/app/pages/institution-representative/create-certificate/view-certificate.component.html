<ion-content [fullscreen]="true">
  <ion-searchbar [formControl]="searchTerm"></ion-searchbar>
  <ion-list lines="none" [inset]="true" class="d-flex">
    <ion-item *ngFor="let certificate of certificatesArray" (click)="toggleModal(certificate)" class="p-0">
      <ion-card class="cursor-pointer">
        <div [innerHTML]="certificate.template" style="scale: 0.7"></div>
        <ion-card-header>
          <ion-card-title>{{certificate.name}}</ion-card-title>
          <ion-card-subtitle>{{certificate.date}}</ion-card-subtitle>
        </ion-card-header>
      </ion-card>
    </ion-item>
  </ion-list>
  <ion-modal [isOpen]="isModalOpen">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>{{chosenCertificate.name}}</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="toggleModal(chosenCertificate)">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <div [innerHTML]="chosenCertificate.template"></div>
          <ion-button (click)="approveCertificate(chosenCertificate)" color="success">Прийняти довідку</ion-button>
          <ion-button (click)="rejectCertificate()" color="danger">Відхилити довідку</ion-button>
        <ion-textarea *ngIf="isRejected" placeholder="Введіть коментар/причину відхилення" [formControl]="rejectReason"></ion-textarea>
        <ion-button *ngIf="isRejected" (click)="confirmRejection(chosenCertificate)">Підтвердити</ion-button>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
